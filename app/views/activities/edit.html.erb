<h1>Редактирование экскурсии</h1>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_for(@activity) do |f| %>
      <%= f.label :title, "Название" %>
      <div class="form-group">
        <input value="<%= @activity.title %>" id="activity_title" type="text" class="form-group form-control" name="activity[title]" @focus="magic_flag = true"
               @blur="magic_flag = false" placeholder="Введите название">
      </div>

      <%= f.label :price, "Цена" %>
      <div class="form-group">
        <input value="<%= @activity.price %>" id="activity_price" type="text" class="form-group form-control" name="activity[price]" placeholder="Введите название">
      </div>


      <%= f.submit "Сохранить изменения", class: "btn btn-primary"  do%>
        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
      <% end %>
    <% end %>

  </div>
</div>

<script>
    var app = new Vue({
        el: '#activity_title',
        data: {
            message: 'Hello Vue!',
            search: '',
            'activity[title]': '',
            magic_flag: false
        },

        watch:{
            activity_title: function () {
                this.activity_title.onblur = function () {
                    $.ajax({
                        type: "POST",
                        dataType: "script",
                        url: '/resources/9',
                        contentType: 'application/json',
                        data: {
                            activity: {
                                title: app.activity[title]
                            },
                        },
                        success: function (json) {
                            alert( "Data Saved: " + json );
                        }
                    });
                }
            }
  
        }
    })
</script>